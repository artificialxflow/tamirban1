# todo-v2 — بازبینی و بهبود بر اساس فازهای تست (1 تا 3)

این فایل نسخهٔ دوم چک‌لیست بهبودها است که بر اساس آیتم‌های علامت‌خورده با `[0 ]` (نیاز به بهبود/نقص) و `[? ]` (نیاز به وضوح یا تست بیشتر) از مستندات فازهای تست در پوشه `update 01/001` تدوین شده است.

## فاز ۱ — بررسی ظاهر (به‌ویژه موبایل)
- [ ] پاسخ‌گویی (Responsive) در موبایل: همه عناصر در صفحه جا می‌شوند و خروج از صفحه نداریم.
- [ ] اندازه و لمس‌پذیری دکمه‌ها روی موبایل (حداقل اندازه انگشت).
- [ ] منوی همبرگر: باز/بسته‌شدن نرم، نمایش پس‌زمینه تیره، نمایش همه آیتم‌ها، بستن با کلیک بیرون/آیتم.
- [ ] Modalها در موبایل: مرکز صفحه، اسکرول محتوا، دکمه بستن (X) قابل‌مشاهده، عدم خروج از صفحه، بستن با کلیک روی پس‌زمینه.

## فاز ۲ — راه‌اندازی و ورود (OTP) و نمایش کاربر فعلی
- [ ] نمایش شماره موبایل کاربر فعلی در پایین منو (Sidebar) پس از ورود.
- [ ] نمایش نقش کاربر فعلی (در صورت نیاز به بهبود یا یکپارچگی با Sidebar).
- [ ] (تأیید سریع) مسیر ورود OTP از درخواست تا ورود به داشبورد بدون رگرسیون.

## فاز ۳ — مدیر کل و ماژول‌های داده‌ای

### ۳.۱ بازاریاب‌ها
- [ ] کارت بازاریاب: نمایش نام، منطقه، نقش به‌صورت کامل.
- [ ] تابلوی امتیاز ۴ بازاریاب برتر نمایش داده می‌شود.
- [ ] بازاریاب غیرفعال دیگر امکان ورود ندارد (تست لاگین بازاریاب غیرفعال).

### ۳.۲ مشتریان
- [ ] ویرایش همه فیلدهای مشتری و اعمال‌شدن تغییرات در لیست/جزئیات.
- [ ] حذف مشتری و نمایش پیام موفقیت؛ حذف در لیست و دیتابیس تأیید شود.
- [ ] Export به Excel: فایل دانلود می‌شود، ستون‌ها کامل هستند، فیلترهای فعال در Export اعمال می‌شوند.

### ۳.۳ ویزیت‌ها
- [ ] جدول و ستون‌ها در لیست ویزیت‌ها نمایش داده می‌شود.
- [ ] نقشه ویزیت‌ها: Markerها نمایش داده می‌شوند و با کلیک جزئیات ویزیت دیده می‌شود؛ Zoom کار می‌کند.
- [ ] ثبت ویزیت جدید: در لیست و روی نقشه نمایش داده می‌شود.
- [ ] فیلترها در لیست ویزیت‌ها به‌درستی کار می‌کنند.

### ۳.۴ پیش‌فاکتورها
- [ ] تغییر وضعیت پرداخت و ثبت تاریخ/مرجع پرداخت به‌درستی ذخیره و نمایش می‌شود.
- [ ] PDF پیش‌فاکتور: دانلود می‌شود؛ اطلاعات مشتری، آیتم‌ها، محاسبات (جمع، تخفیف، مالیات) و واحد قیمت درست هستند.

### ۳.۵ سایر ماژول‌ها (Tasks, Stories, Reports, Settings)
- **Tasks**
  - [ ] ویرایش تسک.
  - [ ] تغییر وضعیت تسک (در انتظار/در حال انجام/تکمیل/لغو).
  - [ ] حذف تسک.
  - [ ] فیلتر بر اساس اختصاص‌یافته/وضعیت/اولویت.
- **Stories**
  - [ ] ویرایش استوری.
  - [ ] حذف استوری.
  - [ ] فعال/غیرفعال کردن استوری.
- **Reports**
  - [ ] مشاهده کارت‌های آماری (KPI).
  - [ ] مشاهده نمودارها (در صورت وجود).
  - [ ] فیلتر بر اساس تاریخ/بازاریاب/مشتری.
  - [ ] Export گزارش مشتریان/پیش‌فاکتورها/ویزیت‌ها/بازاریاب‌ها به Excel.
- **Settings**
  - [ ] مشاهده کاربران هر نقش.
  - [ ] ویرایش permissions نقش‌ها.
  - [ ] تغییر نقش کاربران.

## برندینگ و آیکون‌ها (لوگوی SamTamir)
- [ ] فاویکن مرورگر از لوگوی جدید SamTamir CRM (`/public/favicon.png`) تولید شده و در همه مرورگرها درست نمایش داده می‌شود.
- [ ] آیکون‌های PWA (`/public/icons/icon-192.png`, `/public/icons/icon-512.png`, `/public/icons/icon-180.png`) از همین لوگو تولید شده‌اند.
- [ ] لینک‌ها و متاتگ‌ها (در `app/layout.tsx` و `components/pwa/pwa-head.tsx`) به آیکون‌های صحیح اشاره می‌کنند.
- [ ] صفحه نصب PWA / Add to Home Screen روی موبایل آیکون درست SamTamir را نمایش می‌دهد.
- [ ] لوگوی SamTamir (تصویر `logo.png`) در هدر/سایدبار یا بخش مناسب UI به‌صورت ثابت استفاده می‌شود و alt text مناسبی دارد.
- [ ] برند «سام‌تعمیر / SamTamir CRM» در تمام صفحات کلیدی (صفحه اصلی، داشبورد، صفحه ورود) با لوگو و متون متا هم‌خوان است.

## اولویت‌بندی
- سطح ۱: مسیرهای اصلی استفاده (لاگین و نمایش کاربر، مشتریان، ویزیت‌ها، پیش‌فاکتورها).
- سطح ۲: تجربه موبایل (Responsive، منوی همبرگر، Modalها).
- سطح ۳: ماژول‌های مدیریتی (Tasks، Stories، Reports، Settings) و یکپارچگی برندینگ (لوگو و آیکون‌ها).

